protect_columns <- c('doi')
data_study_general <- data_study_general %>%
rename('notes' = 11) %>%
clean_data(protect = protect_columns)
data_study_general
data_study_general <- data_study_general %>%
rename('notes' = 11) %>%
clean_data(protect = protect_columns_1)
data_study_general
write_csv(data_study_general, 'data_clean/data_study_general.csv')
table_1 <- read_sheet(sheets_id, sheet = 'pop_descriptives') %>%
clean_data() %>%
mutate(., lower_range = sub('\\_.*', '', .$range)) %>%
mutate(., upper_range = sub('.*_', '',.$range,)) %>%
select(1:10, 21:22, 11:20) %>%
select(-range) %>%
filter(!is.na(lead_author)) %>%
write_csv(., 'data_clean/data_table_1.csv')
table_2 <-  read_sheet(sheets_id, sheet = 'testing') %>%
clean_data() %>%
filter(data_on_testing == TRUE) %>%
write_csv(., 'data_clean/data_table_2.csv')
table_3 <-  read_sheet(sheets_id, sheet = 'hospitalisation') %>%
clean_data() %>%
filter(data_on_hospitalisation == TRUE) %>%
write_csv(., 'data_clean/data_table_3.csv')
table_4 <-  read_sheet(sheets_id, sheet = 'severity') %>%
clean_data() %>%
filter(data_disease_severity == TRUE) %>%
write_csv(., 'data_clean/data_table_4.csv')
table_5 <-  read_sheet(sheets_id, sheet = 'mortality') %>%
clean_data() %>%
filter(data_on_deaths == TRUE) %>%
write_csv(., 'data_clean/data_table_5.csv')
table_6 <-  read_sheet(sheets_id, sheet = 'quality_appraisal') %>%
write_csv(., 'data_clean/data_table_6.csv')
source('scripts/prisma_function.R')
date_of_update <- Sys.Date()
date_of_last_update <- date_of_update-10
prev_versions <- c('v1', 'v2')
current_version <- c('v3')
exclude_from_analysis <- c('isaric_1', 'isaric_2', 'isaric_3', 'miyara_old')
exclude_from_qa <- c('ISARIC_1', 'ISARIC_2', 'ISARIC_3', 'Miyara')
search_details <- read_csv("data_clean/search_details.csv")
data_study_general <- read_csv("data_clean/data_study_general.csv")
data_study_general <- data_study_general %>%
filter(!lead_author %in% exclude_from_analysis)
table_1 <- read_csv("data_clean/data_table_1.csv")
table_1 <- table_1 %>%
filter(!lead_author %in% exclude_from_analysis)
table_2 <- read_csv("data_clean/data_table_2.csv")
table_2 <- table_2 %>%
filter(!lead_author %in% exclude_from_analysis)
table_3 <- read_csv("data_clean/data_table_3.csv")
table_3 <- table_3 %>%
filter(!lead_author %in% exclude_from_analysis)
table_4 <- read_csv("data_clean/data_table_4.csv")
table_4 <- table_4 %>%
filter(!lead_author %in% exclude_from_analysis)
table_5 <- read_csv("data_clean/data_table_5.csv")
table_5 <- table_5 %>%
filter(!lead_author %in% exclude_from_analysis)
table_6 <- table_6 %>%
filter(!Author %in% exclude_from_qa)
#Number screened to add to PRISMA
from_prev_version <- data_study_general %>%
filter(review_version %in% prev_versions) %>%
tally() %>%
sum(-sum(length(exclude_from_analysis)-1))
PRISMA_v3 <- PRISMA(search_details)
PRISMA_v3
View(table_1)
PRISMA <- search_details %>%
filter(date_screening > date_of_last_update)
OVID_records <- PRISMA[1,2]
medRxiv_records <- PRISMA[1,6]
other_records <- PRISMA[1,9]
OVID_screened <- PRISMA[1,3]
medRxiv_screened <- PRISMA[1,7]
OVID_included <- PRISMA[1,5]
medRxiv_included <- PRISMA[1,8]
others_included <- PRISMA[1,9]
PRISMA
search_details
#Countries
table(table_1$country)
#Setting
table(data_study_general$study_setting)
#Numbers
summary(table_1$sample_size)
#Number of participants
sum(table_1$sample_size)
#Source of data
table(table_1$data_source)
#Studies reporting smokers
current_smok <- table_1 %>%
filter(., current_smoker != 'NA')
nrow(current_smok)
#Studies reporting former smokers
former_smok <- table_1 %>%
filter(., former_smoker != 'NA')
nrow(former_smok)
#Studies reporting never smokers
never_smok <- table_1 %>%
filter(., never_smoker != 'NA')
nrow(never_smok)
#Studies reporting current/former smokers
current_former_smok <- table_1 %>%
filter(., current_former_smoker != 'NA')
nrow(current_former_smok)
#Studies reporting missing data
missing_smok <- table_1 %>%
filter(., missing != 'NA')
nrow(missing_smok)
#Studies reporting never/unknown
never_smok_unknown <- table_1 %>%
filter(., never_smoker_unknown != 'NA')
nrow(never_smok_unknown)
#Studies with not stated
smok_not_stated <- table_1 %>%
filter(., not_stated != 'NA')
nrow(smok_not_stated)
#Studies reporting current, former and never smoking status
full_smoking_status <- table_1 %>%
filter(lead_author %in% current_smok$lead_author) %>%
filter(lead_author %in% former_smok$lead_author) %>%
filter(lead_author %in% never_smok$lead_author)
#Studies reporting current or current/former and never smoking
semi_full_smoking_status <- table_1 %>%
filter(lead_author %in% current_former_smok$lead_author) %>%
filter(lead_author %in% never_smok$lead_author) %>%
filter(!lead_author %in% full_smoking_status$lead_author)
#Remaining studies
incomplete_smoking_status <- table_1 %>%
filter(!lead_author %in% full_smoking_status$lead_author) %>%
filter(!lead_author %in% semi_full_smoking_status$lead_author)
#Smoking prevalence by country
country_prevalence <- table_1 %>%
group_by(country) %>%
mutate(., current_smok_percentage = current_smoker/total*100) %>%
mutate(., former_smok_percentage = former_smoker/total*100) %>%
mutate(., missing_percentage = missing/total*100)
china_prevalence <- country_prevalence %>%
filter(country == 'china') %>%
summary()
usa_prevalence <- country_prevalence %>%
filter(country == 'usa') %>%
summary()
uk_prevalence <- country_prevalence %>%
filter(country == 'uk') %>%
summary()
france_prevalence <- country_prevalence %>%
filter(country == 'france') %>%
summary()
mexico_prevalence <- country_prevalence %>%
filter(country == 'mexico') %>%
mutate(., not_stated_percentage = not_stated/total*100) %>%
summary()
spain_prevalence <- country_prevalence %>%
filter(country == 'spain') %>%
summary()
italy_prevalence <- country_prevalence %>%
filter(country == 'italy') %>%
summary()
iran_prevalence <- country_prevalence %>%
filter(country == 'iran') %>%
summary()
israel_prevalence <- country_prevalence %>%
filter(country == 'israel') %>%
mutate(never_smoker_percentage = never_smoker/total*100) %>%
summary()
korea_prevalence <- country_prevalence %>%
filter(country == 'korea') %>%
summary()
kuwait_prevalence <- country_prevalence %>%
filter(country == 'kuwait') %>%
summary()
switzerland_prevalence <- country_prevalence %>%
filter(country == 'switzerland') %>%
summary()
#Updating table 1
table_1_word <- table_1 %>%
mutate(., current_percentage = current_smoker/total*100) %>%
mutate(., former_percentage = former_smoker/total*100) %>%
mutate(., current_former_percentage = current_former_smoker/total*100) %>%
mutate(., never_smoker_percentage = never_smoker/total*100) %>%
mutate(., never_smoker_unknown_percentage = never_smoker_unknown/total*100) %>%
mutate(., not_stated_percentage = not_stated/total*100) %>%
mutate(., missing_percentage = missing/total*100) %>%
select(lead_author, date_published, country, sample_size, median_age, iqr_lower, iqr_upper, mean_age, lower_range, upper_range, standard_deviation, female_sex_percent,
current_percentage, former_percentage, current_former_percentage, never_smoker_percentage, never_smoker_unknown_percentage,
not_stated_percentage, missing_percentage)
a <- data_study_general %>%
select(lead_author, study_setting)
table_1_word <- left_join(table_1_word, a, by = 'lead_author') %>%
select(1:4, 20, 5:19)
write_csv(table_1_word, 'data_clean/table_1_word.csv')
#Table 2
table_2_word <-  table_2 %>%
mutate(., sample = contributing_sample) %>%
mutate(., negative_test_percentage = negative_test/sample*100) %>%
mutate(., negative_current_percentage = negative_current_smoker/negative_test*100) %>%
mutate(., negative_former_smoker_percentage = negative_former_smoker/negative_test*100) %>%
mutate(., negative_current_former_smoker_percentage = negative_current_former_smoker/negative_test*100) %>%
mutate(., negative_never_smoker_percentage = negative_never_smoker/negative_test*100) %>%
mutate(., negative_not_stated_percentage = negative_not_stated/negative_test*100) %>%
mutate(., positive_test_percentage = positive_test/sample*100) %>%
mutate(., positive_current_smoker_percentage = positive_current_smoker/positive_test*100) %>%
mutate(., positive_former_smoker_percentage = positive_former_smoker/positive_test*100) %>%
mutate(., positive_current_former_smoker_percentage = positive_current_former_smoker/positive_test*100) %>%
mutate(., positive_never_smoker_percentage = positive_never_smoker/positive_test*100) %>%
mutate(., positive_not_stated_percentage = positive_not_stated/positive_test*100) %>%
select(1:2, 5:6, 19, 7, 20, 8, 21, 9, 22, 10, 23, 11, 24, 12, 25, 13, 26, 14, 27, 15, 28, 16, 29, 17, 30)
write_csv(table_2_word, 'data_clean/table_2_word.csv')
#Table 3
table_3_word <- table_3 %>%
mutate(., sample = sample_with_outcome) %>%
mutate(., community_percentage = number_community/sample*100) %>%
mutate(., community_current_smoker_percent = community_current_smoker/number_community*100) %>%
mutate(., community_former_smoker_percent = community_former_smoker/number_community*100) %>%
mutate(., community_current_former_smoker_percent = community_current_former_smoker/number_community*100) %>%
mutate(., community_never_smoker_percent = community_never_smoker/number_community*100) %>%
mutate(., community_never_unknown_smoker_percent = community_never_unknown_smoker/number_community*100) %>%
mutate(., community_not_stated_percent = community_not_stated/number_community*100) %>%
mutate(., number_hospitalised_percent = number_hospitalised/sample*100) %>%
mutate(., hospitalised_current_smoker_percent = hospitalised_current_smoker/number_hospitalised*100) %>%
mutate(., hospitalised_former_smoker_percent = hospitalised_former_smoker/number_hospitalised*100) %>%
mutate(., hospitalised_current_former_smoker_percent = hospitalised_current_former_smoker/number_hospitalised*100) %>%
mutate(., hospitalised_never_smoker_percent = hospitalised_never_smoker/number_hospitalised*100) %>%
mutate(., hospitalised_never_unknown_smoker_percent = hospitalised_never_unknown_smoker/number_hospitalised*100) %>%
mutate(., hospitalised_not_stated_percent = hospitalised_not_stated/number_hospitalised*100) %>%
select(1, 20, 6, 21, 7, 22, 8, 23, 9, 24, 10, 25, 11, 26, 12, 27, 13, 28, 14, 29, 15, 30, 16, 31, 17, 32, 18, 33, 19, 34)
write_csv(table_3_word, 'data_clean/table_3_word.csv')
#Table 4
table_4_word <- table_4 %>%
mutate(., sample = sample_with_severity) %>%
mutate(., non_severe_disease_percentage = non_severe_disease/sample*100) %>%
mutate(., non_severe_current_smoker_percent = non_severe_current_smoker/non_severe_disease*100) %>%
mutate(., non_severe_former_smoker_percent = non_severe_former_smoker/non_severe_disease*100) %>%
mutate(., non_severe_current_former_smoker_percent = non_severe_current_former_smoker/non_severe_disease*100) %>%
mutate(., non_severe_never_smoker_percent = non_severe_never_smoker/non_severe_disease*100) %>%
mutate(., non_severe_never_unknown_smoker_percent = non_severe_never_unknown_smoker/non_severe_disease*100) %>%
mutate(., non_severe_not_stated_percent = non_severe_not_stated/non_severe_disease*100) %>%
mutate(., severe_disease_number_percent = severe_disease_number/sample*100) %>%
mutate(., severe_disease_current_smoker_percent = severe_disease_current_smoker/severe_disease_number*100) %>%
mutate(., severe_disease_former_smoker_percent = severe_disease_former_smoker/severe_disease_number*100) %>%
mutate(., severe_disease_current_former_smoker_percent = severe_disease_current_former_smoker/severe_disease_number*100) %>%
mutate(., severe_disease_never_smoker_percent = severe_disease_never_smoker/severe_disease_number*100) %>%
mutate(., severe_disease_never_unknown_percent = severe_disease_never_unknown/severe_disease_number*100) %>%
mutate(., severe_disease_not_stated_percent = severe_disease_not_stated/severe_disease_number*100) %>%
select(1, 19, 5, 20, 6, 21, 7, 22, 8, 23, 9, 24, 10, 25, 11, 26, 12, 27, 13, 28, 14, 29, 15, 30, 16, 31, 17, 32, 18, 33)
write_csv(table_4_word, 'data_clean/table_4_word.csv')
#Table 5
table_5_word <- table_5 %>%
mutate(., sample = sample_with_deaths) %>%
mutate(., deaths_percentage = deaths/sample*100) %>%
mutate(., death_current_smokers_percent = death_current_smokers/deaths*100) %>%
mutate(., death_former_smokers_percent = death_former_smokers/deaths*100) %>%
mutate(., death_current_former_smokers_percent = death_current_former_smokers/deaths*100) %>%
mutate(., death_never_smokers_percent = death_never_smokers/deaths*100) %>%
mutate(., death_never_unknown_smokers_percent = death_never_unknown_smokers/deaths*100) %>%
mutate(., death_not_stated_percent = death_not_stated/deaths*100) %>%
mutate(., recovered_percentage = recovered/sample*100) %>%
mutate(., recovered_current_smoking_percent = recovered_current_smoking/recovered*100) %>%
mutate(., recovered_former_smoker_percent = recovered_former_smoker/recovered*100) %>%
mutate(., recovered_current_former_smokers_percent = recovered_current_former_smokers/recovered*100) %>%
mutate(., recovered_never_smoker_percent = recovered_never_smoker/recovered*100) %>%
mutate(., recovered_never_unknown_smoker_percent = recovered_never_unknown_smoker/recovered*100) %>%
mutate(., recovered_not_stated_percent = recovered_not_stated/recovered*100) %>%
select(1, 20, 6, 21, 7, 22, 8, 23, 9, 24, 10, 25, 11, 26, 12, 27, 13, 28, 14, 29, 15, 30, 16, 31, 17, 32, 18, 33, 19, 34)
write_csv(table_5_word, 'data_clean/table_5_word.csv')
#Table 6
table_6_word <- table_6
write_csv(table_6_word, 'data_clean/table_6_word.csv')
library(fmsb)
library(epitools)
library(meta)
library(tidyverse)
negative_test_smoker <- 1444
positive_test_smoker <- 159
negative_test_never_smoker <- 826
positive_test_never_smoker <- 216
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_smoker, positive_test_smoker)
rentsch_table_1 <- rbind(row_1, row_2)
rownames(rentsch_table_1) <- c('never smokers', 'current smokers')
colnames(rentsch_table_1) <- c('negative test', 'positive test')
rentsch_1 <- riskratio(x = rentsch_table_1, method = 'wald', conf.level=0.95)
lower_ci <- log(rentsch_1[["measure"]][2,2])
upper_ci <- log(rentsch_1[["measure"]][2,3])
rentsch_log_RR_1 <- log(rentsch_1[["measure"]][2,1])
rentsch_log_SE_1 <-(upper_ci-lower_ci)/3.92
negative_test_former_smoker <- 704
positive_test_former_smoker <- 179
negative_test_never_smoker <- 826
positive_test_never_smoker <- 216
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_former_smoker, positive_test_former_smoker)
rentsch_table_2 <- rbind(row_1, row_2)
rownames(rentsch_table_2) <- c('never smokers', 'former smokers')
colnames(rentsch_table_2) <- c('negative test', 'positive test')
rentsch_2 <- riskratio(x = rentsch_table_2, method = 'wald', conf.level=0.95)
lower_ci <- log(rentsch_2[["measure"]][2,2])
upper_ci <- log(rentsch_2[["measure"]][2,3])
rentsch_log_RR_2 <- log(rentsch_2[["measure"]][2,1])
rentsch_log_SE_2 <-(upper_ci-lower_ci)/3.92
negative_test_smoker <- 64
positive_test_smoker <- 5
negative_test_never_smoker <- 426
positive_test_never_smoker <- 166
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_smoker, positive_test_smoker)
fontanet_table_1 <- rbind(row_1, row_2)
rownames(fontanet_table_1) <- c('never smokers', 'current smokers')
colnames(fontanet_table_1) <- c('negative test', 'positive test')
fontanet_1 <- riskratio(x = fontanet_table_1, method = 'wald', conf.level=0.95)
niedz_log_RR_1<-log(1.15)
niedz_log_SE_1<-(log(1.54)-log(0.86))/3.92
niedz_log_RR_2<-log(1.42)
niedz_log_SE_2<-(log(1.69)-log(1.19))/3.92
#current vs. never
negative_test_smoker <- 142
negative_test_never_smoker <- 437
positive_test_smoker <- 111
positive_test_never_smoker <- 282
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_smoker, positive_test_smoker)
cho_table_1 <- rbind(row_1, row_2)
rownames(cho_table_1) <- c('never smokers', 'current smokers')
colnames(cho_table_1) <- c('negative test', 'positive test')
cho_1 <- riskratio(x = cho_table_1, method = 'wald', conf.level=0.95)
lower_ci <- log(cho_1[["measure"]][2,2])
upper_ci <- log(cho_1[["measure"]][2,3])
cho_log_RR_1 <- log(cho_1[["measure"]][2,1])
cho_log_SE_1 <-(upper_ci-lower_ci)/3.92
negative_test_former_smoker <- 214
positive_test_former_smoker <- 145
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_former_smoker, positive_test_former_smoker)
cho_table_2 <- rbind(row_1, row_2)
rownames(cho_table_2) <- c('never smokers', 'former smokers')
colnames(cho_table_2) <- c('negative test', 'positive test')
cho_2 <- riskratio(x = cho_table_2, method = 'wald', conf.level=0.95)
lower_ci <- log(cho_2[["measure"]][2,2])
upper_ci <- log(cho_2[["measure"]][2,3])
cho_log_RR_2 <- log(cho_2[["measure"]][2,1])
cho_log_SE_2 <-(upper_ci-lower_ci)/3.92
#current vs. never
negative_test_smoker <- 52
negative_test_never_smoker <- 113
positive_test_smoker <- 0
positive_test_never_smoker <- 20
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_smoker, positive_test_smoker)
shah_table_1 <- rbind(row_1, row_2)
rownames(shah_table_1) <- c('never smokers', 'current smokers')
colnames(shah_table_1) <- c('negative test', 'positive test')
shah_1 <- riskratio(x = shah_table_1, method = 'wald', conf.level=0.95)
lower_ci <- log(shah_1[["measure"]][2,2])
upper_ci <- log(shah_1[["measure"]][2,3])
shah_log_RR_1 <- log(shah_1[["measure"]][2,1])
shah_log_SE_1 <-(upper_ci-lower_ci)/3.92
negative_test_former_smoker <- 47
positive_test_former_smoker <- 9
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_former_smoker, positive_test_former_smoker)
shah_table_2 <- rbind(row_1, row_2)
rownames(shah_table_2) <- c('never smokers', 'former smokers')
colnames(shah_table_2) <- c('negative test', 'positive test')
shah_2 <- riskratio(x = shah_table_2, method = 'wald', conf.level=0.95)
lower_ci <- log(shah_2[["measure"]][2,2])
upper_ci <- log(shah_2[["measure"]][2,3])
shah_log_RR_2 <- log(shah_2[["measure"]][2,1])
shah_log_SE_2 <-(upper_ci-lower_ci)/3.92
negative_test_current_former <- 4835
negative_test_not_stated <- 42125
positive_test_current_former <- 1374
positive_test_not_stated <- 14155
row_1 <- c(negative_test_not_stated, positive_test_not_stated)
row_2 <- c(negative_test_current_former, positive_test_current_former)
bello_table_1 <- rbind(row_1, row_2)
rownames(bello_table_1) <- c('not stated', 'current/former smokers')
colnames(bello_table_1) <- c('negative test', 'positive test')
bello_1 <- riskratio(x = bello_table_1, method = 'wald', conf.level=0.95)
#current vs. never
negative_test_smoker <- 141
negative_test_never_smoker <- 354
positive_test_smoker <- 72
positive_test_never_smoker <- 303
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_smoker, positive_test_smoker)
kolin_table_1 <- rbind(row_1, row_2)
rownames(kolin_table_1) <- c('never smokers', 'current smokers')
colnames(kolin_table_1) <- c('negative test', 'positive test')
kolin_1 <- riskratio(x = kolin_table_1, method = 'wald', conf.level=0.95)
lower_ci <- log(kolin_1[["measure"]][2,2])
upper_ci <- log(kolin_1[["measure"]][2,3])
kolin_log_RR_1 <- log(kolin_1[["measure"]][2,1])
kolin_log_SE_1 <-(upper_ci-lower_ci)/3.92
negative_test_former_smoker <- 307
positive_test_former_smoker <- 285
row_1 <- c(negative_test_never_smoker, positive_test_never_smoker)
row_2 <- c(negative_test_former_smoker, positive_test_former_smoker)
kolin_table_2 <- rbind(row_1, row_2)
rownames(kolin_table_2) <- c('never smokers', 'former smokers')
colnames(kolin_table_2) <- c('negative test', 'positive test')
kolin_2 <- riskratio(x = kolin_table_2, method = 'wald', conf.level=0.95)
lower_ci <- log(kolin_2[["measure"]][2,2])
upper_ci <- log(kolin_2[["measure"]][2,3])
kolin_log_RR_2 <- log(kolin_2[["measure"]][2,1])
kolin_log_SE_2 <-(upper_ci-lower_ci)/3.92
# For poor quality studies text ----------------------------------------------------------------
RR <- fontanet_1$measure[[2,1]]
Lower_CI <- fontanet_1$measure[[2,2]]
Upper_CI <- fontanet_1$measure[[2,3]]
p_value_Chi <- fontanet_1$p.value[[2,3]]
Fontanet_results <- cbind(RR, Lower_CI, Upper_CI, p_value_Chi)
rownames(Fontanet_results) <- 'Fontanet et al. 2020'
Fontanet_results
RR <- bello_1$measure[[2,1]]
Lower_CI <- bello_1$measure[[2,2]]
Upper_CI <- bello_1$measure[[2,3]]
p_value_Chi <- bello_1$p.value[[2,3]]
bello_results <- cbind(RR, Lower_CI, Upper_CI, p_value_Chi)
rownames(bello_results) <- 'Bello et al. 2020'
bello_results
# Testing -----------------------------------------------------------------
included_studies <- c('Rentsch', 'Cho', 'Shah', 'Kolin', 'Niedzwiedz')
TE<-c(rentsch_log_RR_1,cho_log_RR_1,shah_log_RR_1, kolin_log_RR_1,niedz_log_RR_1)
seTE<-c(rentsch_log_SE_1,cho_log_SE_1, shah_log_SE_1 ,kolin_log_SE_1,niedz_log_SE_1)
a<-metagen(TE,seTE,sm="RR", studlab = included_studies, comb.fixed = F, comb.random = T)
png("figure/fig_2.png", width=1024, height=546, res=120)
forest(a,
sortvar = included_studies,
xlim = c(0.3, 2),
rightlabs = c('RR', '95% CI', 'Weight'),
leftlabs = c('Author', 'logRR', 'SE'),
print.tau2 = F,
col.diamond = 'blue',
col.diamond.lines = 'black',
col.square = 'black',
col.square.lines = 'black',
digits.sd = 2,
colgap.forest.left = unit(15,"mm"))
dev.off()
forest(a,
sortvar = included_studies,
xlim = c(0.3, 2),
rightlabs = c('RR', '95% CI', 'Weight'),
leftlabs = c('Author', 'logRR', 'SE'),
print.tau2 = F,
col.diamond = 'blue',
col.diamond.lines = 'black',
col.square = 'black',
col.square.lines = 'black',
digits.sd = 2,
colgap.forest.left = unit(15,"mm"))
TE<-c(rentsch_log_RR_2,cho_log_RR_2,shah_log_RR_2,kolin_log_RR_2,niedz_log_RR_2)
seTE<-c(rentsch_log_SE_2,cho_log_SE_2,shah_log_SE_2,kolin_log_SE_2,niedz_log_SE_2)
b<-metagen(TE,seTE,sm="RR", studlab = included_studies, comb.fixed = F, comb.random = T)
png("figure/fig_3.png", width=1024, height=546, res=120)
forest(b,
sortvar = included_studies,
xlim = c(0.5, 3),
rightlabs = c('RR', '95% CI', 'Weight'),
leftlabs = c('Author', 'logRR', 'SE'),
print.tau2 = F,
col.diamond = 'blue',
col.diamond.lines = 'black',
col.square = 'black',
col.square.lines = 'black',
digits.sd = 2)
dev.off()
forest(b,
sortvar = included_studies,
xlim = c(0.5, 3),
rightlabs = c('RR', '95% CI', 'Weight'),
leftlabs = c('Author', 'logRR', 'SE'),
print.tau2 = F,
col.diamond = 'blue',
col.diamond.lines = 'black',
col.square = 'black',
col.square.lines = 'black',
digits.sd = 2)
bello_results
row_1 <- c(not_positive_never_smoker, positive_never_smoker)
row_2 <- c(not_positive_smoker, positive_smoker)
# de Lusignan -------------------------------------------------------------
not_positive_smoker <- 366
positive_smoker <- 47
not_positive_never_smoker <- 924
positive_never_smoker <- 201
row_1 <- c(not_positive_never_smoker, positive_never_smoker)
row_2 <- c(not_positive_smoker, positive_smoker)
de_lusignan_table_1 <- rbind(row_1, row_2)
de_lusignan_table_1
rownames(rentsch_table_1) <- c('never smokers', 'current smokers')
colnames(de_lusignan_table_1) <- c('not-positive test', 'positive test')
de_lusignan_table_1 <- riskratio(x = de_lusignan_table_1, method = 'wald', conf.level=0.95)
de_lusignan_table_1
#former vs. never smokers
not_positive_former_smoker <- 1450
positive_former_smoker <- 303
not_positive_never_smoker <- 924
positive_never_smoker <- 201
row_1 <- c(not_positive_never_smoker, positive_never_smoker)
row_2 <- c(not_positive_former_smoker, positive_former_smoker)
de_lusignan_table_2 <- rbind(row_1, row_2)
rownames(de_lusignan_table_2) <- c('never smokers', 'former smokers')
colnames(de_lusignan_table_2) <- c('not-positive test', 'positive test')
de_lusignan_table_2 <- riskratio(x = de_lusignan_table_2, method = 'wald', conf.level=0.95)
de_lusignan_table_2
